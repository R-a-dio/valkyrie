{{define "content"}}
<section class="section">
    <div class="content">
        <div class="title has-text-centered mb-6 is-hidden-mobile">
            <h3>News Archive</h3>
        </div>
        <div id="news-content" hx-boost="true" hx-push-url="true" hx-target="#content" class="columns is-multiline">
            {{range $news := $.News}}
                {{template "news-post" $news}}
            {{end}}
            {{with .Page.Next 1}}
            <div id="news-scroll"
                hx-push-url="false"
                hx-trigger="intersect once"
                hx-get="{{.URL}}"
                hx-select="#news-content>div"
                hx-target="#news-content"
                hx-swap="beforeend"></div>
            {{end}}
        </div>
        <div class="is-hidden-with-js">
            {{template "pagination" .Page}}
        </div>
    </div>
</section>
{{end}}

{{define "news-post"}}
<div class="column is-3-fullhd is-4-desktop is-half-tablet">
    <article class="message m-3 p-0">
        <div class="message-header">
            <a href="/news/{{.ID}}">
                <span>{{.Title}}</span>
            </a>
                <span>~{{.User.Username}}</span>
            </div>
            <div class="message-header has-background-white-ter has-text-grey-dark m-1 p-1">
                <span class="has-text-left"></span>
                <time datetime="{{.CreatedAt.Unix}}" data-type="absolute">{{.CreatedAt | AbsoluteDate}}</time>
            </div>
            <div class="message-body pt-0 disable-message-border">{{.Header}}</div>
    </article>
</div>
{{end}}